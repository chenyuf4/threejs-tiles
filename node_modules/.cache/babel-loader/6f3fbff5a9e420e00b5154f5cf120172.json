{"ast":null,"code":"var _jsxFileName = \"/Users/chenyuf2/Desktop/threejs-tiles/src/components/Scene/Scene.js\",\n    _s = $RefreshSig$();\n\nimport ImagePlane from \"../ImagePlane/ImagePlane\";\nimport { Suspense } from \"react\";\nimport { IMAGE_BLOCK_WIDTH, IMAGE_GAP } from \"../../utils/utilFormat\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport { imagesArr } from \"../../utils/utilFormat\";\nimport { useStore } from \"../../store/store\";\nimport { useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Scene = () => {\n  _s();\n\n  const numImages = imagesArr.length;\n  const {\n    width\n  } = useThree(state => state.viewport);\n  const {\n    scrollSpeed,\n    setScrollSpeed,\n    scrollDirection,\n    setScrollDirection\n  } = useStore();\n  const tilesRef = useRef();\n  useFrame((state, delta) => {\n    if (!tilesRef.current) return;\n    const {\n      x,\n      y,\n      z\n    } = tilesRef.current.position;\n    let nextPos = x;\n\n    if (scrollDirection === \"L\") {\n      nextPos -= scrollSpeed;\n    } else {\n      nextPos += scrollSpeed;\n    }\n\n    tilesRef.current.position.set(nextPos, y, z);\n    setScrollSpeed(0);\n  });\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    ref: tilesRef,\n    children: imagesArr.map((url, index) => {\n      const imagePosition = [IMAGE_BLOCK_WIDTH * index + IMAGE_GAP * index, 0, 0];\n      return /*#__PURE__*/_jsxDEV(ImagePlane, {\n        index: index,\n        url: url,\n        position: imagePosition\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Scene, \"ddfRmDt+JXWzIH8K8YTPsDNDMXA=\", false, function () {\n  return [useThree, useStore, useFrame];\n});\n\n_c = Scene;\nexport default Scene;\n\nvar _c;\n\n$RefreshReg$(_c, \"Scene\");","map":{"version":3,"sources":["/Users/chenyuf2/Desktop/threejs-tiles/src/components/Scene/Scene.js"],"names":["ImagePlane","Suspense","IMAGE_BLOCK_WIDTH","IMAGE_GAP","useFrame","useThree","imagesArr","useStore","useRef","Scene","numImages","length","width","state","viewport","scrollSpeed","setScrollSpeed","scrollDirection","setScrollDirection","tilesRef","delta","current","x","y","z","position","nextPos","set","map","url","index","imagePosition"],"mappings":";;;AAAA,OAAOA,UAAP,MAAuB,0BAAvB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,iBAAT,EAA4BC,SAA5B,QAA6C,wBAA7C;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,oBAAnC;AACA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,MAAT,QAAuB,OAAvB;;;AACA,MAAMC,KAAK,GAAG,MAAM;AAAA;;AAClB,QAAMC,SAAS,GAAGJ,SAAS,CAACK,MAA5B;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAYP,QAAQ,CAAEQ,KAAD,IAAWA,KAAK,CAACC,QAAlB,CAA1B;AACA,QAAM;AAAEC,IAAAA,WAAF;AAAeC,IAAAA,cAAf;AAA+BC,IAAAA,eAA/B;AAAgDC,IAAAA;AAAhD,MACJX,QAAQ,EADV;AAEA,QAAMY,QAAQ,GAAGX,MAAM,EAAvB;AACAJ,EAAAA,QAAQ,CAAC,CAACS,KAAD,EAAQO,KAAR,KAAkB;AACzB,QAAI,CAACD,QAAQ,CAACE,OAAd,EAAuB;AACvB,UAAM;AAAEC,MAAAA,CAAF;AAAKC,MAAAA,CAAL;AAAQC,MAAAA;AAAR,QAAcL,QAAQ,CAACE,OAAT,CAAiBI,QAArC;AACA,QAAIC,OAAO,GAAGJ,CAAd;;AACA,QAAIL,eAAe,KAAK,GAAxB,EAA6B;AAC3BS,MAAAA,OAAO,IAAIX,WAAX;AACD,KAFD,MAEO;AACLW,MAAAA,OAAO,IAAIX,WAAX;AACD;;AACDI,IAAAA,QAAQ,CAACE,OAAT,CAAiBI,QAAjB,CAA0BE,GAA1B,CAA8BD,OAA9B,EAAuCH,CAAvC,EAA0CC,CAA1C;AACAR,IAAAA,cAAc,CAAC,CAAD,CAAd;AACD,GAXO,CAAR;AAYA,sBACE;AAAO,IAAA,GAAG,EAAEG,QAAZ;AAAA,cACGb,SAAS,CAACsB,GAAV,CAAc,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAC7B,YAAMC,aAAa,GAAG,CACpB7B,iBAAiB,GAAG4B,KAApB,GAA4B3B,SAAS,GAAG2B,KADpB,EAEpB,CAFoB,EAGpB,CAHoB,CAAtB;AAKA,0BACE,QAAC,UAAD;AACE,QAAA,KAAK,EAAEA,KADT;AAGE,QAAA,GAAG,EAAED,GAHP;AAIE,QAAA,QAAQ,EAAEE;AAJZ,SAEOD,KAFP;AAAA;AAAA;AAAA;AAAA,cADF;AAQD,KAdA;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAmBD,CArCD;;GAAMrB,K;UAEcJ,Q,EAEhBE,Q,EAEFH,Q;;;KANIK,K;AAuCN,eAAeA,KAAf","sourcesContent":["import ImagePlane from \"../ImagePlane/ImagePlane\";\nimport { Suspense } from \"react\";\nimport { IMAGE_BLOCK_WIDTH, IMAGE_GAP } from \"../../utils/utilFormat\";\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport { imagesArr } from \"../../utils/utilFormat\";\nimport { useStore } from \"../../store/store\";\nimport { useRef } from \"react\";\nconst Scene = () => {\n  const numImages = imagesArr.length;\n  const { width } = useThree((state) => state.viewport);\n  const { scrollSpeed, setScrollSpeed, scrollDirection, setScrollDirection } =\n    useStore();\n  const tilesRef = useRef();\n  useFrame((state, delta) => {\n    if (!tilesRef.current) return;\n    const { x, y, z } = tilesRef.current.position;\n    let nextPos = x;\n    if (scrollDirection === \"L\") {\n      nextPos -= scrollSpeed;\n    } else {\n      nextPos += scrollSpeed;\n    }\n    tilesRef.current.position.set(nextPos, y, z);\n    setScrollSpeed(0);\n  });\n  return (\n    <group ref={tilesRef}>\n      {imagesArr.map((url, index) => {\n        const imagePosition = [\n          IMAGE_BLOCK_WIDTH * index + IMAGE_GAP * index,\n          0,\n          0,\n        ];\n        return (\n          <ImagePlane\n            index={index}\n            key={index}\n            url={url}\n            position={imagePosition}\n          />\n        );\n      })}\n    </group>\n  );\n};\n\nexport default Scene;\n"]},"metadata":{},"sourceType":"module"}